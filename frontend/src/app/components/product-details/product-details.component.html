<div *ngIf="state$ | async as state">
  <div *ngIf="state.isLoading" class="loading">Loading...</div>
  
  <div *ngIf="state.error" class="error" role="alert" aria-live="polite">
    {{ state.error }}
  </div>

  <div *ngIf="!state.isLoading && !state.error && state.product" class="product-details">
    <div class="header">
      <h1>{{ state.product.name }}</h1>
      <div class="actions">
        <a [routerLink]="['/products', state.product.id, 'edit']" class="btn btn-primary">Edit</a>
        <button 
          type="button" 
          class="btn btn-danger" 
          [disabled]="state.isDeleting"
          (click)="deleteProduct(state.product.id)"
        >
          {{ state.isDeleting ? 'Deleting...' : 'Delete' }}
        </button>
        <a routerLink="/products" class="btn btn-secondary">Back to List</a>
      </div>
    </div>

    <div class="details-grid">
      <div class="detail-item">
        <label>ID</label>
        <span>{{ state.product.id }}</span>
      </div>

      <div class="detail-item">
        <label>Name</label>
        <span>{{ state.product.name }}</span>
      </div>

      <div class="detail-item">
        <label>Description</label>
        <span>{{ state.product.description || 'No description' }}</span>
      </div>

      <div class="detail-item">
        <label>Price</label>
        <span>{{ state.product.price | currency:'USD':'symbol':'1.2-2' }}</span>
      </div>

      <div class="detail-item">
        <label>Category</label>
        <span>{{ state.product.categoryName }}</span>
      </div>

      <div class="detail-item">
        <label>Stock Quantity</label>
        <span>{{ state.product.stockQuantity }}</span>
      </div>

      <div class="detail-item">
        <label>Created Date</label>
        <span>{{ state.product.createdDate | date:'medium' }}</span>
      </div>

      <div class="detail-item">
        <label>Status</label>
        <span [class.active]="state.product.isActive" [class.inactive]="!state.product.isActive">
          {{ state.product.isActive ? 'Active' : 'Inactive' }}
        </span>
      </div>
    </div>
  </div>
</div>
